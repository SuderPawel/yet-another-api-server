<h4>Information about API handler</h4>

<table class="table">
  <thead>
  <tr>
    <th>Property</th>
    <th>Value</th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td>Name</td>
    <td><%= @api.name %></td>
  </tr>
  <tr>
    <td>UUID</td>
    <td><%= @api.uuid %></td>
  </tr>
  <tr>
    <td>Last update</td>
    <td><%= @api.updated_at %></td>
  </tr>
</table>

<h4>Usage</h4>

<div class="alert alert-info" role="alert">
  <p>Example <code>GET</code> usage:
    <code>curl -X GET <%= request.protocol %><%= request.env['HTTP_HOST'] %>/api/<%= @api.uuid %></code></p>
  <p>Example <code>POST</code> usage:
    <code>curl -X POST -d "body" <%= request.protocol %><%= request.env['HTTP_HOST'] %>/api/<%= @api.uuid %></code></p>
</div>

<h4>Noticed events</h4>

<table class="table">
  <thead>
  <tr>
    <th>Id</th>
    <th>Date</th>
    <th>Method</th>
    <th>Params</th>
    <th>Body</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  <% @api.events.each do |event| %>
      <tr>
        <td>#<%= event.id %></td>
        <td><%= event.created_at %></td>
        <td><code><%= event.method %></code></td>
        <td>
          <pre><%= event.params %></pre>
        </td>
        <td>
          <pre><%= event.body %></pre>
        </td>
        <td>
          <div class="btn-group btn-group-xs" role="group">
            <%= link_to 'Show', '/apis/%d/events/%d' % [@api.id, event.id], class: 'btn btn-default', role: 'button' %>
          </div>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>
